import{r as t,j as e,a as x}from"./app-XlSfP4sL.js";import{F as n}from"./FieldError-BxybFJDV.js";import{M as S}from"./Modal-tgVvVQCA.js";import{u as K}from"./usePagination-SSEkhUX4.js";import{M as O}from"./MainLayout-DTHad3oP.js";import{L as W}from"./Locations-BhM42jRo.js";import"./transition-BbNkYL5E.js";function Y({show:E,userId:v,onClose:N}){const[o,u]=t.useState(""),[p,d]=t.useState(""),[w,c]=t.useState({}),j=()=>{u(""),d(""),c({}),N()},g=async()=>{try{await x.patch(route("user.update-password",v),{password:o,password_confirmation:p}),j()}catch(a){console.log(a.response.data.errors),c(a.response.data.errors)}};return e.jsxs(S,{show:E,title:"Reset Password",children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4 ",children:"Change Password"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Password"}),e.jsx("input",{type:"password",className:"w-full rounded-md bg-[#1c1f22]",value:o,placeholder:"Enter password",onChange:a=>u(a.target.value)}),e.jsx(n,{errors:w,name:"password"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Password Confirmation"}),e.jsx("input",{type:"password",className:"w-full rounded-md bg-[#1c1f22]",value:p,placeholder:"Enter password",onChange:a=>d(a.target.value)}),e.jsx(n,{errors:w,name:"password_confirmation"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:j,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]})}function ee({auth:E}){const[v,N]=t.useState([]),[o,u]=t.useState(""),[p,d]=t.useState(!1),[w,c]=t.useState(!1),[j,g]=t.useState(!1),[a,i]=t.useState(null),[h,P]=t.useState({}),[r,M]=t.useState({name:"",email:"",role:"Branch Admin",branch:"",password:"",password_confirmation:""}),{page:y,size:k,setTotalAndTotalPage:z,setPage:D,renderPagination:R}=K({className:"mt-4"}),f=()=>{let s={page_size:k,page:y+1};o&&(s.search=o),x.get(route("user.all",s)).then(m=>{const{data:C,total:b,per_page:T}=m.data;N(C),z(b,T)}).catch(m=>{console.log(m)})};t.useEffect(f,[y,k]);const l=(s,m)=>{M(C=>{let b={...C};return b[s]=m,b})},_=s=>{s.key==="Enter"&&(y!=0?D(0):f())},A=()=>{d(!1),M({name:"",email:"",role:"Branch Admin",branch:"",password:"",password_confirmation:""}),P({}),i(null)},L=async()=>{try{a?await x.put(route("user.update",a),r):await x.post(route("user.create"),r),A(),f()}catch(s){console.log(s.response.data.errors),P(s.response.data.errors)}},V=s=>{l("name",s.name),l("email",s.email),l("role",s.role),l("branch",s.branch??""),i(s.id),d(!0)},U=s=>{i(s),g(!0)},B=()=>{i(null),g(!1)},H=()=>{x.delete(route("user.delete",a)).then(()=>{f(),B()}).catch(s=>{console.log(s)})},I=s=>{i(s),c(!0)},F=()=>{i(null),c(!1)};return e.jsx(O,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"Users"}),e.jsxs("div",{className:"flex justify-between gap-3 flex-wrap",children:[e.jsx("input",{value:o,onChange:s=>u(s.target.value),onKeyUp:_,placeholder:"Search here",className:"flex-1 min-w-[120px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-1 bg-cyan-700 text-white hover:bg-cyan-600 rounded-md",children:"New"})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Branch"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.role}),e.jsx("td",{children:s.branch}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>I(s.id),className:"px-4 py-1 bg-orange-700 text-white hover:bg-orange-600 rounded-md",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("title",{children:"Change Password"}),e.jsx("rect",{x:"6",y:"11",width:"12",height:"10",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 11V8a3 3 0 1 1 6 0v3"}),e.jsx("path",{d:"M3 6h6l-2-2"}),e.jsx("path",{d:"M21 6h-6l2 2"})]})}),e.jsx("button",{onClick:()=>V(s),className:"px-4 ml-2 py-1 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Edit"}),e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})]})}),e.jsx("button",{onClick:()=>U(s.id),className:"px-4 py-1 ml-2 bg-red-700 text-white hover:bg-red-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Delete"}),e.jsx("path",{d:"M6 8h1v8H6V8zm3 0h1v8H9V8zm3 0h1v8h-1V8zM4 5V4h3l1-1h4l1 1h3v1H4zm1 2h10l-1 11H6L5 7z"})]})})]})]},s.id))})]})}),R,e.jsxs(S,{show:p,children:[e.jsxs("h1",{className:"text-[22px] font-semibold mb-4 ",children:[a?"Edit":"New"," User"]}),e.jsx("label",{className:"w-full",children:"Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:r.name,placeholder:"Enter name",onChange:s=>l("name",s.target.value)}),e.jsx(n,{errors:h,name:"name"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Email"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:r.email,placeholder:"Enter email",onChange:s=>l("email",s.target.value)}),e.jsx(n,{errors:h,name:"email"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Role"}),e.jsxs("select",{value:r.role,onChange:s=>l("role",s.target.value),className:"w-full rounded-md bg-[#1c1f22]",children:[e.jsx("option",{value:"Branch Admin",children:"Branch Admin"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),r.role!=="Admin"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Branch"}),e.jsxs("select",{value:r.branch,onChange:s=>l("branch",s.target.value),className:"w-full rounded-md bg-[#1c1f22]",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),W.map(s=>e.jsx("option",{value:s.name,children:s.name},s.code))]}),e.jsx(n,{errors:h,name:"branch"})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Password"}),e.jsx("input",{type:"password",className:"w-full rounded-md bg-[#1c1f22]",value:r.password,placeholder:"Enter password",onChange:s=>l("password",s.target.value)}),e.jsx(n,{errors:h,name:"password"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Password Confirmation"}),e.jsx("input",{type:"password",className:"w-full rounded-md bg-[#1c1f22]",value:r.password_confirmation,placeholder:"Enter password",onChange:s=>l("password_confirmation",s.target.value)}),e.jsx(n,{errors:h,name:"password_confirmation"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:A,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:L,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]}),e.jsxs(S,{show:j,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4",children:"Delete Confirmation"}),e.jsx("p",{className:"",children:"Are you sure you want to delete this?"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:B,className:"px-4 py-1 bg-gray-700 text-white hover:bg-gray-600 rounded-md",children:"No"}),e.jsx("button",{onClick:H,className:"px-4 py-1 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Yes"})]})]}),e.jsx(Y,{show:w,userId:a,onClose:F})]})})}export{ee as default};
