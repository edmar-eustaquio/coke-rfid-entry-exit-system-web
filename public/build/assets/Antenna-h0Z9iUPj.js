import{r as l,j as e,a as d}from"./app-CVtOkzCn.js";import{F as b}from"./FieldError-Cb2N4gea.js";import{M as f}from"./Modal-Cg6MiNkG.js";import{M}from"./MainLayout-B7JDvi0d.js";import"./transition-DDI27JyG.js";function V({reader:n}){const[g,w]=l.useState([]),[y,c]=l.useState(!1),[N,h]=l.useState(!1),[r,a]=l.useState(null),[m,u]=l.useState({}),[i,j]=l.useState({port:"",station:"",entry_or_exit_site:""}),x=()=>{d.get(route("reader.antenna.get-by-reader",n.id)).then(t=>{w(t.data)}).catch(t=>{console.log(t)})};l.useEffect(x,[]);const s=(t,o)=>j(D=>({...D,[t]:o})),p=()=>{c(!1),j({port:"",station:"",entry_or_exit_site:""}),u({}),a(null)},_=async()=>{try{const t={...i,reader_id:n.id};r?await d.put(route("reader.antenna.update",r),t):await d.post(route("reader.antenna.create"),t),p(),x()}catch(t){console.log(t.response.data.errors),u(t.response.data.errors)}},E=t=>{s("port",t.port),s("station",t.station),s("entry_or_exit_site",t.entry_or_exit_site??""),a(t.id),c(!0)},C=t=>{a(t),h(!0)},v=()=>{a(null),h(!1)},S=()=>{d.delete(route("reader.antenna.delete",r)).then(()=>{x(),v()}).catch(t=>{console.log(t)})};return e.jsx(M,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"Antennas"}),e.jsxs("div",{className:"border-dashed border rounded-md p-5 gap-x-6 flex justify-between flex-wrap",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 w-full border-b border-b-gray-500",children:"Reader Details"}),e.jsxs("div",{className:"flex-1 min-w-fit",children:[e.jsxs("div",{children:["Serial :"," ",e.jsx("span",{className:"text-cyan-600 font-semibold italic",children:n.serial_no})]}),e.jsxs("div",{children:["Arduino ID :"," ",e.jsx("span",{className:"text-cyan-600 font-semibold italic",children:n.arduino_id})]})]}),e.jsxs("div",{className:"flex-1 min-w-fit",children:[e.jsxs("div",{children:["Location :"," ",e.jsx("span",{className:"text-cyan-600 font-semibold italic",children:n.location})]}),e.jsxs("div",{children:["Location Code :"," ",e.jsx("span",{className:"text-cyan-600 font-semibold italic",children:n.location_code})]})]})]}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-1 mt-3 bg-cyan-700 text-white hover:bg-cyan-600 rounded-md",children:"New"}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Port"}),e.jsx("th",{children:"Station"}),e.jsx("th",{children:"Entry/Exit Site"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.port}),e.jsx("td",{children:t.station}),e.jsx("td",{children:t.entry_or_exit_site}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>E(t),className:"px-4 ml-2 py-1 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Edit"}),e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})]})}),e.jsx("button",{onClick:()=>C(t.id),className:"px-4 py-1 ml-2 bg-red-700 text-white hover:bg-red-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Delete"}),e.jsx("path",{d:"M6 8h1v8H6V8zm3 0h1v8H9V8zm3 0h1v8h-1V8zM4 5V4h3l1-1h4l1 1h3v1H4zm1 2h10l-1 11H6L5 7z"})]})})]})]},t.id))})]})}),e.jsxs(f,{show:y,children:[e.jsxs("h1",{className:"text-[22px] font-semibold mb-4 ",children:[r?"Edit":"New"," Antenna"]}),e.jsxs("div",{children:[e.jsx("label",{className:"w-full",children:"Port"}),e.jsxs("select",{value:i.port,onChange:t=>s("port",t.target.value),className:"w-full rounded-md bg-[#1c1f22]",children:[e.jsx("option",{value:"",children:"Select Port"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"8",children:"8"})]}),e.jsx(b,{errors:m,name:"port"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Station"}),e.jsxs("select",{className:"w-full rounded-md bg-[#1c1f22]",value:i.station,onChange:t=>{const o=t.target.value;o==="Exit"?s("entry_or_exit_site","Exit"):i.entry_or_exit_site==="Exit"&&o!=="Exit"&&s("entry_or_exit_site",""),s("station",o)},children:[e.jsx("option",{value:"",children:"Select Station"}),e.jsx("option",{value:"Parking",children:"Parking"}),e.jsx("option",{value:"Dock",children:"Dock"}),e.jsx("option",{value:"Yard",children:"Yard"}),e.jsx("option",{value:"Exit",children:"Exit"})]}),e.jsx(b,{errors:m,name:"station"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Entry/Exit Site"}),e.jsxs("select",{className:"w-full rounded-md bg-[#1c1f22]",value:i.entry_or_exit_site,onChange:t=>s("entry_or_exit_site",t.target.value),children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"Entry",children:"Entry"}),e.jsx("option",{value:"Exit",children:"Exit"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:p,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]}),e.jsxs(f,{show:N,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4",children:"Delete Confirmation"}),e.jsx("p",{className:"",children:"Are you sure you want to delete this?"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:v,className:"px-4 py-1 bg-gray-700 text-white hover:bg-gray-600 rounded-md",children:"No"}),e.jsx("button",{onClick:S,className:"px-4 py-1 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Yes"})]})]})]})})}export{V as default};
