import{r as l,a as h,j as e,L as K}from"./app-CVtOkzCn.js";import{F as p}from"./FieldError-Cb2N4gea.js";import{M as _}from"./Modal-Cg6MiNkG.js";import{u as U}from"./usePagination-BeXn-rk_.js";import{M as T}from"./MainLayout-B7JDvi0d.js";import"./transition-DDI27JyG.js";function X({LOCATIONS:j}){const[C,S]=l.useState([]),[x,M]=l.useState(""),[k,u]=l.useState(!1),[L,g]=l.useState(!1),[i,r]=l.useState(null),[m,f]=l.useState({}),[o,w]=l.useState({serial_no:"",arduino_id:"",location:"",location_code:""}),{page:b,size:v,setTotalAndTotalPage:z,setPage:D,renderPagination:E}=U({className:"mt-4",onChange:(t,a)=>{n({page:t+1,page_size:a})}}),n=t=>{let a=t??{page_size:v,page:b+1};x&&(a.search=x),h.get(route("reader.all",a)).then(d=>{const{data:c,total:I,per_page:F}=d.data;S(c),z(I,F)}).catch(d=>{console.log(d)})};l.useEffect(n,[]);const s=(t,a)=>{w(d=>{let c={...d};return c[t]=a,c})},A=t=>{t.key==="Enter"&&(b!=0?D(0):n({page:1,page_size:v}))},V=t=>{s("location",t);for(let a of j)if(a.name===t){s("location_code",a.code);return}s("location_code","")},N=()=>{u(!1),w({serial_no:"",arduino_id:"",location:"",location_code:""}),f({}),r(null)},H=async()=>{try{i?await h.put(route("reader.update",i),o):await h.post(route("reader.create"),o),N(),n()}catch(t){console.log(t.response.data.errors),f(t.response.data.errors)}},P=t=>{s("serial_no",t.serial_no),s("arduino_id",t.arduino_id),s("location",t.location),s("location_code",t.location_code),r(t.id),u(!0)},R=t=>{r(t),g(!0)},y=()=>{r(null),g(!1)},B=()=>{h.delete(route("reader.delete",i)).then(()=>{n(),y()}).catch(t=>{console.log(t)})};return e.jsx(T,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"Readers"}),e.jsxs("div",{className:"flex justify-between gap-3 flex-wrap",children:[e.jsx("input",{value:x,onChange:t=>M(t.target.value),onKeyUp:A,placeholder:"Search here",className:"flex-1 min-w-[120px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-1 bg-cyan-700 text-white hover:bg-cyan-600 rounded-md",children:"New"})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Serial No"}),e.jsx("th",{children:"Arduino ID"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Location Code"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:C.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.serial_no}),e.jsx("td",{children:t.arduino_id}),e.jsx("td",{children:t.location}),e.jsx("td",{children:t.location_code}),e.jsxs("td",{children:[e.jsx(K,{href:route("reader.antenna.index",t.id),children:e.jsx("button",{className:"px-4 ml-2 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("title",{children:"Manage Antennas"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),e.jsx("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),e.jsx("path",{d:"M12 6c2 0 4 2 5 3"}),e.jsx("path",{d:"M12 3c3 0 6 3 7 5"})]})})}),e.jsx("button",{onClick:()=>P(t),className:"px-4 ml-2 py-1 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Edit"}),e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})]})}),e.jsx("button",{onClick:()=>R(t.id),className:"px-4 py-1 ml-2 bg-red-700 text-white hover:bg-red-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Delete"}),e.jsx("path",{d:"M6 8h1v8H6V8zm3 0h1v8H9V8zm3 0h1v8h-1V8zM4 5V4h3l1-1h4l1 1h3v1H4zm1 2h10l-1 11H6L5 7z"})]})})]})]},t.id))})]})}),E,e.jsxs(_,{show:k,children:[e.jsxs("h1",{className:"text-[22px] font-semibold mb-4 ",children:[i?"Edit":"New"," Reader"]}),e.jsx("label",{className:"w-full",children:"Serial No."}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:o.serial_no,placeholder:"Enter serial no",onChange:t=>s("serial_no",t.target.value)}),e.jsx(p,{errors:m,name:"serial_no"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Arduino ID"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:o.arduino_id,placeholder:"Enter arduino id",onChange:t=>s("arduino_id",t.target.value)}),e.jsx(p,{errors:m,name:"arduino_id"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Location"}),e.jsxs("select",{value:o.location,onChange:t=>V(t.target.value),className:"w-full rounded-md bg-[#1c1f22]",children:[e.jsx("option",{value:"",children:"Select Location"}),j.map(t=>e.jsx("option",{value:t.name,children:t.name},t.code))]}),e.jsx(p,{errors:m,name:"location"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Location Code"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:o.location_code,disabled:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:N,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:H,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]}),e.jsxs(_,{show:L,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4",children:"Delete Confirmation"}),e.jsx("p",{className:"",children:"Are you sure you want to delete this?"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:y,className:"px-4 py-1 bg-gray-700 text-white hover:bg-gray-600 rounded-md",children:"No"}),e.jsx("button",{onClick:B,className:"px-4 py-1 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Yes"})]})]})]})})}export{X as default};
