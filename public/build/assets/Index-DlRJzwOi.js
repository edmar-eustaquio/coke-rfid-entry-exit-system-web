import{r as n,a as x,j as e}from"./app-CVtOkzCn.js";import{F as d}from"./FieldError-Cb2N4gea.js";import{M as C}from"./Modal-Cg6MiNkG.js";import{u as R}from"./usePagination-BeXn-rk_.js";import{M as Y}from"./MainLayout-B7JDvi0d.js";import"./transition-DDI27JyG.js";function Z({LOCATIONS:g}){const[_,E]=n.useState([]),[c,S]=n.useState(""),[p,r]=n.useState(null),[D,v]=n.useState(!1),[M,f]=n.useState(!1),[o,b]=n.useState({}),[s,w]=n.useState({vehicle_id:"",plate_no:"",capacity:"",agent:"",location_code:"",location:"",provider:""}),{page:m,size:u,setTotalAndTotalPage:k,setPage:z,renderPagination:L}=R({className:"mt-4"});n.useEffect(()=>i(),[m,u]);const l=(t,a)=>{w(j=>{let h={...j};return h[t]=a,h})},i=()=>{let t={page_size:u,page:m+1};c&&(t.search=c),x.get(route("truck.all",t)).then(a=>{const{data:j,total:h,per_page:K}=a.data;E(j),k(h,K)}).catch(a=>{console.log(a)})},P=t=>{t.key==="Enter"&&(z(0),i())},V=t=>{r(t),v(!0)},N=()=>{r(null),v(!1)},I=()=>{x.delete(route("truck.delete",p)).then(()=>{i(),N()}).catch(t=>{console.log(t)})},y=()=>{f(!1),w({vehicle_id:"",plate_no:"",capacity:"",agent:"",location_code:"",location:"",provider:""}),b({}),r(null)},T=t=>{l("rfid",t.rfid),l("vehicle_id",t.vehicle_id),l("plate_no",t.plate_no),l("capacity",t.capacity),l("agent",t.agent),l("location_code",t.location_code),l("location",t.location),l("provider",t.provider),r(t.id),f(!0)},U=async()=>{try{p&&await x.put(route("truck.update",p),s),y(),i()}catch(t){console.log(t.response.data.errors),b(t.response.data.errors)}},A=()=>{document.getElementById("upload-file").click()},H=t=>{x.post(route("truck.upload"),{file:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{i()}).catch(a=>{console.log(a)})},B=t=>{l("location",t);for(let a of g)if(a.name===t){l("location_code",a.code);break}},F=()=>{let t={page_size:u,page:m+1};c.trim()!=""&&(t.search=c.trim()),document.location.href=route("truck.export",t)};return e.jsxs(Y,{children:[e.jsx("input",{id:"upload-file",type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:H}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"Trucks"}),e.jsxs("div",{className:"flex justify-between gap-2 flex-wrap",children:[e.jsx("input",{value:c,onChange:t=>S(t.target.value),onKeyUp:P,placeholder:"Search here",className:"w-full min-w-[120px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:A,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Upload"}),e.jsx("button",{onClick:F,className:"px-4 py-1 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:"Export"})]})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[750px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"RFID"}),e.jsx("th",{children:"Vehicle ID"}),e.jsx("th",{children:"Plate No"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Agent"}),e.jsx("th",{children:"Location Code"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Provider"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:_.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.rfid}),e.jsx("td",{children:t.vehicle_id}),e.jsx("td",{children:t.plate_no}),e.jsx("td",{children:t.capacity}),e.jsx("td",{children:t.agent}),e.jsx("td",{children:t.location_code}),e.jsx("td",{children:t.location}),e.jsx("td",{children:t.provider}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>T(t),className:"px-4 py-1 ml-2 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Edit"}),e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"})]})}),e.jsx("button",{onClick:()=>V(t.id),className:"px-4 py-1 ml-2 bg-red-700 text-white hover:bg-red-600 rounded-md",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("title",{children:"Delete"}),e.jsx("path",{d:"M6 8h1v8H6V8zm3 0h1v8H9V8zm3 0h1v8h-1V8zM4 5V4h3l1-1h4l1 1h3v1H4zm1 2h10l-1 11H6L5 7z"})]})})]})]},t.id))})]})}),L]}),e.jsxs(C,{show:D,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4",children:"Delete Confirmation"}),e.jsx("p",{className:"",children:"Are you sure you want to delete this?"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:N,className:"px-4 py-1 bg-gray-700 text-white hover:bg-gray-600 rounded-md",children:"No"}),e.jsx("button",{onClick:I,className:"px-4 py-1 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Yes"})]})]}),e.jsxs(C,{show:M,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4 ",children:"Edit Truck"}),e.jsx("label",{className:"w-full",children:"Vehicle ID"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:s.vehicle_id,placeholder:"Enter vehicle id",onChange:t=>l("vehicle_id",t.target.value)}),e.jsx(d,{errors:o,name:"vehicle_id"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Plate No."}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:s.plate_no,placeholder:"Enter plate no",onChange:t=>l("plate_no",t.target.value)}),e.jsx(d,{errors:o,name:"plate_no"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Capacity"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:s.capacity,placeholder:"Enter capacity",onChange:t=>l("capacity",t.target.value)}),e.jsx(d,{errors:o,name:"capacity"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Agent"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:s.agent,placeholder:"Enter agent",onChange:t=>l("agent",t.target.value)}),e.jsx(d,{errors:o,name:"agent"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Location"}),e.jsxs("select",{value:s.location,onChange:t=>B(t.target.value),className:"w-full rounded-md bg-[#1c1f22]",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Location"}),g.map(t=>e.jsx("option",{value:t.name,children:t.name},t.code))]}),e.jsx(d,{errors:o,name:"location"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Location Code"}),e.jsx("input",{type:"text",disabled:!0,className:"w-full rounded-md bg-[#2e3235]",value:s.location_code,placeholder:"Location Code"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"w-full",children:"Provider"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:s.provider,placeholder:"Enter provider",onChange:t=>l("provider",t.target.value)}),e.jsx(d,{errors:o,name:"provider"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:y,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:U,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]})]})}export{Z as default};
