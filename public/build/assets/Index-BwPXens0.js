import{r as s,a as y,j as e}from"./app-CVtOkzCn.js";import{u as z}from"./usePagination-BeXn-rk_.js";import{M as E}from"./MainLayout-B7JDvi0d.js";function A({LOCATIONS:p}){const[u,j]=s.useState([]),[d,f]=s.useState(""),[o,g]=s.useState(""),[l,w]=s.useState(""),[n,v]=s.useState(""),[i,_]=s.useState(""),{page:x,setPage:m,size:r,setTotalAndTotalPage:b,renderPagination:S}=z({className:"mt-4",onChange:(t,a)=>{c({page_size:a,page:t+1})}}),c=t=>{let a=t??{page_size:r,page:x+1};d.trim()!=""&&(a.search=d.trim()),n.trim()!=""&&(a.date_from=n.trim()),i.trim()!=""&&(a.date_until=i.trim()),o!=""&&(a.location_code=o),l!=""&&(a.station=l),y.get(route("history.all",a)).then(h=>{const{data:k,total:D,per_page:P}=h.data;j(k),b(D,P)}).catch(h=>{console.log(h)})};s.useEffect(()=>{m(0),c({page_size:r,page:1})},[n,i,o,l]);const N=()=>{let t={page_size:r,page:x+1};d.trim()!=""&&(t.search=d.trim()),n.trim()!=""&&(t.date_from=n.trim()),i.trim()!=""&&(t.date_until=i.trim()),document.location.href=route("history.export",t)},C=t=>{t.key==="Enter"&&(m(0),c({page_size:r,page:1}))};return e.jsx(E,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"History"}),e.jsx("button",{onClick:N,className:"px-4 h-fit py-1 rounded-md bg-teal-700 text-white hover:bg-teal-600",children:"Export"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-between",children:[e.jsx("input",{type:"text",value:d,onChange:t=>f(t.target.value),onKeyUp:C,placeholder:"Search here",className:"flex-1 min-w-[150px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:n,onChange:t=>v(t.target.value),placeholder:"Select date from",className:"shadow-sm w-[150px] shadow-white/50 bg-[#1c1f22] rounded-md"}),e.jsx("input",{type:"date",value:i,onChange:t=>_(t.target.value),placeholder:"Select date until",className:"shadow-sm w-[150px] shadow-white/50 bg-[#1c1f22] rounded-md"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap mt-2 justify-between",children:[e.jsxs("select",{value:o,onChange:t=>g(t.target.value),className:"min-w-[150px] max-w-[500px] flex-[2] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md",children:[e.jsx("option",{value:"",children:"All Location"}),p.map(t=>e.jsx("option",{value:t.code,children:t.name},t.code))]}),e.jsxs("select",{value:l,onChange:t=>w(t.target.value),className:"min-w-[150px] max-w-[310px] flex-1 shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md",children:[e.jsx("option",{value:"",children:"All Station"}),e.jsx("option",{value:"Parking",children:"Parking"}),e.jsx("option",{value:"Dock",children:"Dock"}),e.jsx("option",{value:"Yard",children:"Yard"})]})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Vehicle ID"}),e.jsx("th",{children:"Plate No"}),e.jsx("th",{children:"Date Scan"}),e.jsx("th",{children:"Time Scan"}),e.jsx("th",{children:"Out Date Scan"}),e.jsx("th",{children:"Out Time Scan"}),e.jsx("th",{children:"Location Code"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Station"})]})}),e.jsx("tbody",{children:u.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.truck.vehicle_id}),e.jsx("td",{children:t.truck.plate_no}),e.jsx("td",{children:t.date_scan}),e.jsx("td",{children:t.time_scan}),e.jsx("td",{children:t.out_date_scan}),e.jsx("td",{children:t.out_time_scan}),e.jsx("td",{children:t.location_code}),e.jsx("td",{children:t.location}),e.jsx("td",{children:t.station})]},t.id))})]})}),S]})})}export{A as default};
