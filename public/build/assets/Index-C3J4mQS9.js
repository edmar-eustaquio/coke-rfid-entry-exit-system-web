import{r as s,a as P,j as e}from"./app-XlSfP4sL.js";import{u as z}from"./usePagination-SSEkhUX4.js";import{M as D}from"./MainLayout-DTHad3oP.js";import{L as E}from"./Locations-BhM42jRo.js";function F(){const[u,j]=s.useState([]),[l,f]=s.useState(""),[o,g]=s.useState(""),[d,w]=s.useState(""),[r,v]=s.useState(""),[i,N]=s.useState(""),[n,S]=s.useState(""),{page:m,setPage:p,size:c,setTotalAndTotalPage:b,renderPagination:_}=z({className:"mt-4",onChange:(t,a)=>{h({page_size:a,page:t+1})}}),h=t=>{let a=t??{page_size:c,page:m+1};l.trim()!=""&&(a.search=l.trim()),i.trim()!=""&&(a.date_from=i.trim()),n.trim()!=""&&(a.date_until=n.trim()),o!=""&&(a.type=o),d!=""&&(a.location_code=d),r!=""&&(a.station=r),P.get(route("history.all",a)).then(x=>{const{data:k,total:T,per_page:L}=x.data;j(k),b(T,L)}).catch(x=>{console.log(x)})};s.useEffect(()=>{p(0),h({page_size:c,page:1})},[i,n,o,d,r]);const y=()=>{let t={page_size:c,page:m+1};l.trim()!=""&&(t.search=l.trim()),i.trim()!=""&&(t.date_from=i.trim()),n.trim()!=""&&(t.date_until=n.trim()),document.location.href=route("history.export",t)},C=t=>{t.key==="Enter"&&(p(0),h({page_size:c,page:1}))};return e.jsx(D,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"History"}),e.jsx("button",{onClick:y,className:"px-4 h-fit py-1 rounded-md bg-teal-700 text-white hover:bg-teal-600",children:"Export"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-between",children:[e.jsx("input",{type:"text",value:l,onChange:t=>f(t.target.value),onKeyUp:C,placeholder:"Search here",className:"flex-1 min-w-[150px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:i,onChange:t=>N(t.target.value),placeholder:"Select date from",className:"shadow-sm w-[150px] shadow-white/50 bg-[#1c1f22] rounded-md"}),e.jsx("input",{type:"date",value:n,onChange:t=>S(t.target.value),placeholder:"Select date until",className:"shadow-sm w-[150px] shadow-white/50 bg-[#1c1f22] rounded-md"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap mt-2 justify-between",children:[e.jsxs("select",{value:o,onChange:t=>g(t.target.value),className:"w-[150px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md",children:[e.jsx("option",{value:"",children:"All Type"}),e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"})]}),e.jsxs("select",{value:d,onChange:t=>w(t.target.value),className:"min-w-[150px] flex-[2] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md",children:[e.jsx("option",{value:"",children:"Select Location"}),E.map(t=>e.jsx("option",{value:t.code,children:t.name},t.code))]}),e.jsxs("select",{value:r,onChange:t=>v(t.target.value),className:"min-w-[150px] flex-1 shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md",children:[e.jsx("option",{value:"",children:"All Station"}),e.jsx("option",{value:"Site",children:"Site"}),e.jsx("option",{value:"Parking",children:"Parking"}),e.jsx("option",{value:"Dock",children:"Dock"}),e.jsx("option",{value:"Yard",children:"Yard"})]})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Vehicle ID"}),e.jsx("th",{children:"Plate No"}),e.jsx("th",{children:"Date Scan"}),e.jsx("th",{children:"Time Scan"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Location Code"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Station"})]})}),e.jsx("tbody",{children:u.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.truck.vehicle_id}),e.jsx("td",{children:t.truck.plate_no}),e.jsx("td",{children:t.date_scan}),e.jsx("td",{children:t.time_scan}),t.type=="in"?e.jsx("td",{className:"text-teal-700",children:"IN"}):e.jsx("td",{className:"text-lime-700",children:"OUT"}),e.jsx("td",{children:t.location_code}),e.jsx("td",{children:t.location}),e.jsx("td",{children:t.station})]},t.id))})]})}),_]})})}export{F as default};
