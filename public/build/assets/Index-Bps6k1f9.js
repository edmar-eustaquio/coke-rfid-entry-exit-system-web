import{r as s,j as e,a as r}from"./app-CVtOkzCn.js";import{M as j}from"./Modal-Cg6MiNkG.js";import{u as K}from"./usePagination-BeXn-rk_.js";import{M as T}from"./MainLayout-B7JDvi0d.js";import"./transition-DDI27JyG.js";function F(){const[w,N]=s.useState([]),[d,y]=s.useState(""),[v,c]=s.useState(!1),[C,m]=s.useState(!1),[l,n]=s.useState(null),[x,i]=s.useState(""),[u,p]=s.useState(null),{page:h,size:g,setTotalAndTotalPage:S,setPage:E,renderPagination:k}=K({className:"mt-4"}),o=()=>{let t={page_size:g,page:h+1};d&&(t.search=d),r.get(route("branch.all",t)).then(a=>{const{data:_,total:z,per_page:I}=a.data;N(_),S(z,I)}).catch(a=>{console.log(a)})};s.useEffect(o,[h,g]);const M=t=>{t.key==="Enter"&&(h!=0?E(0):o())},b=()=>{c(!1),i(""),p(null),n(null)},D=async()=>{const t=x.trim();if(t.length==0){p("Name is required.");return}try{l?await r.put(route("branch.update",l),{name:t}):await r.post(route("branch.create"),{name:t}),b(),o()}catch(a){console.log(a)}},P=t=>{i(t.name),n(t.id),c(!0)},A=t=>{n(t.id),m(!0)},f=()=>{n(null),m(!1)},B=()=>{r.delete(route("branch.delete",l)).then(()=>{o(),f()}).catch(t=>{console.log(t)})};return e.jsx(T,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-[25px] mb-4",children:"Branches"}),e.jsxs("div",{className:"flex justify-between gap-3 flex-wrap",children:[e.jsx("input",{value:d,onChange:t=>y(t.target.value),onKeyUp:M,placeholder:"Search here",className:"flex-1 min-w-[120px] shadow-sm shadow-white/50 bg-[#1c1f22] rounded-md max-w-[500px]"}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-1 bg-cyan-700 text-white hover:bg-cyan-600 rounded-md",children:"New"})]}),e.jsx("div",{className:"shadow-lg overflow-auto shadow-white/50 border rounded-lg mt-4 border-[#1c1f22]",children:e.jsxs("table",{className:"w-full min-w-[400px]",children:[e.jsx("thead",{className:"border-b border-dotted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:w.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>P(t),className:"px-4 py-1 bg-lime-700 text-white hover:bg-lime-600 rounded-md",children:"Edit"}),e.jsx("button",{onClick:()=>A(t),className:"px-4 py-1 ml-2 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Delete"})]})]},t.id))})]})}),k,e.jsxs(j,{show:v,children:[e.jsxs("h1",{className:"text-[22px] font-semibold mb-4 ",children:[l?"Edit":"New"," Branch"]}),e.jsx("label",{className:"w-full",children:"Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md bg-[#1c1f22]",value:x,onChange:t=>i(t.target.value)}),u&&e.jsx("p",{className:"text-red-600",children:u}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:b,className:"px-4 py-1 bg-yellow-700 text-white hover:bg-yellow-600 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:D,className:"px-4 py-1 bg-teal-700 text-white hover:bg-teal-600 rounded-md",children:"Save"})]})]}),e.jsxs(j,{show:C,children:[e.jsx("h1",{className:"text-[22px] font-semibold mb-4",children:"Delete Confirmation"}),e.jsx("p",{className:"",children:"Are you sure you want to delete this?"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{onClick:f,className:"px-4 py-1 bg-gray-700 text-white hover:bg-gray-600 rounded-md",children:"No"}),e.jsx("button",{onClick:B,className:"px-4 py-1 bg-red-700 text-white hover:bg-red-600 rounded-md",children:"Yes"})]})]})]})})}export{F as default};
